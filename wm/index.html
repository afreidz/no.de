<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://unpkg.com/browser-cjs/require.min.js"></script>
  <title>Test</title>
  <style>
    * {
      box-sizing: border-box;
    }
  </style>
</head>

<body>

</body>
<script>
  const Window = require('./wm/src/window.js');
  const Splitter = require('./wm/src/splitter.js');
  const updateLayout = require('./wm/src/layout.js');
  const { Workspace, Container } = require('./wm/src/workspace.js');

  const ws = new Workspace({ x: 87, y: 32, w: 1000, h: 800 }, 0, [1.8, 0.2]);
  const s1 = new Splitter({ parent: ws.id, ratios: [0.5, 1.5] });
  const s2 = new Splitter({ parent: ws.id });
  const win1 = new Window({ parent: s1.id, decorate: true });
  const win2 = new Window({ parent: s1.id, decorate: true });
  const win3 = new Window({ parent: s2.id, decorate: true });
  updateLayout(ws.id);
  draw(ws);

  function draw(n) {
    const div = document.createElement('div');
    div.style.position = 'absolute';
    div.classList.add(n.constructor.name.toLowerCase());
    div.classList.add(n.dir);
    if (n.decorate) {
      div.style.backgroundColor = '#ccc';
      div.style.border = '1px solid black';
    }
    div.style.left = `${n.x}px`;
    div.style.top = `${n.y}px`;
    div.style.width = `${n.w}px`;
    div.style.height = `${n.h}px`;
    document.body.appendChild(div);
    if (n.children.length) return n.children.forEach(c => draw(Container.getById(c)));
  }


</script>

</html>